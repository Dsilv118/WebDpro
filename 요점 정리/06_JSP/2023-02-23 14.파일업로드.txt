2023.02.23 요점정리

12. 파일업로드 

● 파일업로드
파일 업로드란?
웹 브라우저(크롬)에서 서버(톰캣)로 파일을 전송하여 서버에 저장하는 것

◎ 파일 업로드 특징
* 웹 브라우저에서 서버로 파일을 전송하기 위해 jsp에 form 태그를 사용한다.
* 전송된 파일을 서버에 저장하기 위해 오픈 라이브러리를 이용한다.
* 이미지 파일, binary 파일, 문서, 텍스트 파일
* 폼 태그 내에 사용되어야 한다. 오픈 라이브러리를 사용한다.
* 서버로 파일이 업로드되면 서버는 요청 파라미터를 분석하여 파일을 찾고 파일 저장 폴더에 저장.
  이 처리는 단순한 자바 코드로 작성 불가하다.

◎ cos.jar
* cos.jar의 핵심 클래스 MultipartRequest이다.
* MultipartRequest 클래스를 통해 객체를 생성하고 해당 객체의 메소드들을 활용하여 웹브라우저가 
  전송한 multipart/form-data 유형의 요청 파라미터를 읽어오고 파일을 업로드함.

◎ 파일 업로드 처리 순서
1. 폼 데이터가 multipart/form-data 형식으로 전송되었나 검증
2. 업로드된 파일과 폼 데이터를 담는 DiskFileUpload 객체를 생성
3. DiskFileUpload 객체에서 아이템들을 추출
4. 추출된 아이템을 하나씩 꺼내서 폼 데이터인지 파일인지 분석하여 각각의 처리를 작성